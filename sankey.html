
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple Sankey</title>

  <!-- Apache ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

  <style>
    html, body {
      margin: 0;
      height: 100%;
      width: 100%;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #chart {
      width: 100%;
      height: 100%;
    }
    button, select {
      background: #f1f1f1;
      border: 1px solid #d5d5d5;
      border-radius: 0.25rem;
      padding: 0.5em 1em;
      font-size: 14px;
    }
    .buttons {
      display: flex;
      column-gap : 0.5rem;
      justify-content: center;
    }
    .title-text {
      font-size: 24px;
      
    }
  </style>
</head>
<body>
<p class="title-text">Taxonomy Sankey</p>

<div class="buttons">
  <button onClick="set1reads()" >Set 1</button>
  <button onClick="set05reads()" >Set 0.5</button>
  <button onClick="set01reads()" >Set 0.1</button>

  <select id="depthSelect" onchange="onDepthChange()">
    <option value="2" selected>Up to Class</option>
    <option value="3">Up to Order</option>
    <option value="4">Up to Family</option>
    <option value="5">Up to Genus</option>
    <option value="6" selected>Up to Species</option>
  </select>
</div>
<div id="chart"></div>

<script id="data_1" type="application/json">
 {
  "nodes": [
    {
      "name": "Bacillati",
      "rank": "Kingdom",
      "percent": 50.016,
      "value": 50.016
    },
    {
      "name": "Actinomycetota",
      "rank": "Phylum",
      "percent": 47.76,
      "value": 47.76
    },
    {
      "name": "Actinomycetes",
      "rank": "Class",
      "percent": 43.595,
      "value": 43.595
    },
    {
      "name": "Micrococcales",
      "rank": "Order",
      "percent": 6.5,
      "value": 6.5
    },
    {
      "name": "Kitasatosporales",
      "rank": "Order",
      "percent": 12.122,
      "value": 12.122
    },
    {
      "name": "Streptomycetaceae",
      "rank": "Family",
      "percent": 12.096,
      "value": 12.096
    },
    {
      "name": "Streptomyces",
      "rank": "Genus",
      "percent": 10.972,
      "value": 10.972
    },
    {
      "name": "Pseudomonadati",
      "rank": "Kingdom",
      "percent": 44.837,
      "value": 44.837
    },
    {
      "name": "Pseudomonadota",
      "rank": "Phylum",
      "percent": 34.937,
      "value": 34.937
    },
    {
      "name": "Gammaproteobacteria",
      "rank": "Class",
      "percent": 5.738,
      "value": 5.738
    },
    {
      "name": "Betaproteobacteria",
      "rank": "Class",
      "percent": 7.417,
      "value": 7.417
    },
    {
      "name": "Burkholderiales",
      "rank": "Order",
      "percent": 6.286,
      "value": 6.286
    },
    {
      "name": "Alphaproteobacteria",
      "rank": "Class",
      "percent": 20.127,
      "value": 20.127
    },
    {
      "name": "Hyphomicrobiales",
      "rank": "Order",
      "percent": 12.201,
      "value": 12.201
    }
  ],
  "links": [
    {
      "source": "Bacillati",
      "target": "Actinomycetota",
      "rel": 3068556,
      "value": 47.76
    },
    {
      "source": "Actinomycetota",
      "target": "Actinomycetes",
      "rel": 2800933,
      "value": 43.595
    },
    {
      "source": "Actinomycetes",
      "target": "Micrococcales",
      "rel": 417593,
      "value": 6.5
    },
    {
      "source": "Actinomycetes",
      "target": "Kitasatosporales",
      "rel": 778849,
      "value": 12.122
    },
    {
      "source": "Kitasatosporales",
      "target": "Streptomycetaceae",
      "rel": 777160,
      "value": 12.096
    },
    {
      "source": "Streptomycetaceae",
      "target": "Streptomyces",
      "rel": 704918,
      "value": 10.972
    },
    {
      "source": "Pseudomonadati",
      "target": "Pseudomonadota",
      "rel": 2244643,
      "value": 34.937
    },
    {
      "source": "Pseudomonadota",
      "target": "Gammaproteobacteria",
      "rel": 368637,
      "value": 5.738
    },
    {
      "source": "Pseudomonadota",
      "target": "Betaproteobacteria",
      "rel": 476523,
      "value": 7.417
    },
    {
      "source": "Betaproteobacteria",
      "target": "Burkholderiales",
      "rel": 403845,
      "value": 6.286
    },
    {
      "source": "Pseudomonadota",
      "target": "Alphaproteobacteria",
      "rel": 1293158,
      "value": 20.127
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Hyphomicrobiales",
      "rel": 783899,
      "value": 12.201
    }
  ]
}
</script>

<script id="data_0_5" type="application/json">
 {
  "nodes": [
    {
      "name": "Bacillati",
      "rank": "Kingdom",
      "percent": 50.016,
      "value": 50.016
    },
    {
      "name": "Bacillota",
      "rank": "Phylum",
      "percent": 1.565,
      "value": 1.565
    },
    {
      "name": "Bacilli",
      "rank": "Class",
      "percent": 1.163,
      "value": 1.163
    },
    {
      "name": "Bacillales",
      "rank": "Order",
      "percent": 1.084,
      "value": 1.084
    },
    {
      "name": "Actinomycetota",
      "rank": "Phylum",
      "percent": 47.76,
      "value": 47.76
    },
    {
      "name": "Thermoleophilia",
      "rank": "Class",
      "percent": 2.524,
      "value": 2.524
    },
    {
      "name": "Solirubrobacterales",
      "rank": "Order",
      "percent": 2.312,
      "value": 2.312
    },
    {
      "name": "Actinomycetes",
      "rank": "Class",
      "percent": 43.595,
      "value": 43.595
    },
    {
      "name": "Geodermatophilales",
      "rank": "Order",
      "percent": 1.001,
      "value": 1.001
    },
    {
      "name": "Geodermatophilaceae",
      "rank": "Family",
      "percent": 1.002,
      "value": 1.002
    },
    {
      "name": "Streptosporangiales",
      "rank": "Order",
      "percent": 1.941,
      "value": 1.941
    },
    {
      "name": "Streptosporangiaceae",
      "rank": "Family",
      "percent": 1.077,
      "value": 1.077
    },
    {
      "name": "Pseudonocardiales",
      "rank": "Order",
      "percent": 3.757,
      "value": 3.757
    },
    {
      "name": "Pseudonocardiaceae",
      "rank": "Family",
      "percent": 3.755,
      "value": 3.755
    },
    {
      "name": "Pseudonocardia",
      "rank": "Genus",
      "percent": 1.117,
      "value": 1.117
    },
    {
      "name": "Amycolatopsis",
      "rank": "Genus",
      "percent": 1.131,
      "value": 1.131
    },
    {
      "name": "Micromonosporales",
      "rank": "Order",
      "percent": 4.457,
      "value": 4.457
    },
    {
      "name": "Micromonosporaceae",
      "rank": "Family",
      "percent": 4.457,
      "value": 4.457
    },
    {
      "name": "Actinoplanes",
      "rank": "Genus",
      "percent": 1.0,
      "value": 1.0
    },
    {
      "name": "Micromonospora",
      "rank": "Genus",
      "percent": 1.876,
      "value": 1.876
    },
    {
      "name": "Mycobacteriales",
      "rank": "Order",
      "percent": 4.739,
      "value": 4.739
    },
    {
      "name": "Nocardiaceae",
      "rank": "Family",
      "percent": 1.332,
      "value": 1.332
    },
    {
      "name": "Mycobacteriaceae",
      "rank": "Family",
      "percent": 2.478,
      "value": 2.478
    },
    {
      "name": "Mycobacterium",
      "rank": "Genus",
      "percent": 0.975,
      "value": 0.975
    },
    {
      "name": "Mycolicibacterium",
      "rank": "Genus",
      "percent": 1.192,
      "value": 1.192
    },
    {
      "name": "Propionibacteriales",
      "rank": "Order",
      "percent": 3.741,
      "value": 3.741
    },
    {
      "name": "Nocardioidaceae",
      "rank": "Family",
      "percent": 2.759,
      "value": 2.759
    },
    {
      "name": "Nocardioides",
      "rank": "Genus",
      "percent": 2.362,
      "value": 2.362
    },
    {
      "name": "Micrococcales",
      "rank": "Order",
      "percent": 6.5,
      "value": 6.5
    },
    {
      "name": "Micrococcaceae",
      "rank": "Family",
      "percent": 1.209,
      "value": 1.209
    },
    {
      "name": "Microbacteriaceae",
      "rank": "Family",
      "percent": 2.945,
      "value": 2.945
    },
    {
      "name": "Microbacterium",
      "rank": "Genus",
      "percent": 1.093,
      "value": 1.093
    },
    {
      "name": "Kitasatosporales",
      "rank": "Order",
      "percent": 12.122,
      "value": 12.122
    },
    {
      "name": "Streptomycetaceae",
      "rank": "Family",
      "percent": 12.096,
      "value": 12.096
    },
    {
      "name": "Streptomyces",
      "rank": "Genus",
      "percent": 10.972,
      "value": 10.972
    },
    {
      "name": "Pseudomonadati",
      "rank": "Kingdom",
      "percent": 44.837,
      "value": 44.837
    },
    {
      "name": "Bacteroidota",
      "rank": "Phylum",
      "percent": 1.096,
      "value": 1.096
    },
    {
      "name": "Planctomycetota",
      "rank": "Phylum",
      "percent": 2.484,
      "value": 2.484
    },
    {
      "name": "Planctomycetia",
      "rank": "Class",
      "percent": 2.338,
      "value": 2.338
    },
    {
      "name": "Myxococcota",
      "rank": "Phylum",
      "percent": 2.678,
      "value": 2.678
    },
    {
      "name": "Myxococcia",
      "rank": "Class",
      "percent": 1.185,
      "value": 1.185
    },
    {
      "name": "Myxococcales",
      "rank": "Order",
      "percent": 1.187,
      "value": 1.187
    },
    {
      "name": "Polyangiales",
      "rank": "Order",
      "percent": 1.264,
      "value": 1.264
    },
    {
      "name": "Polyangiaceae",
      "rank": "Family",
      "percent": 1.073,
      "value": 1.073
    },
    {
      "name": "Sorangium",
      "rank": "Genus",
      "percent": 0.94,
      "value": 0.94
    },
    {
      "name": "Pseudomonadota",
      "rank": "Phylum",
      "percent": 34.937,
      "value": 34.937
    },
    {
      "name": "Gammaproteobacteria",
      "rank": "Class",
      "percent": 5.738,
      "value": 5.738
    },
    {
      "name": "Pseudomonadales",
      "rank": "Order",
      "percent": 1.79,
      "value": 1.79
    },
    {
      "name": "Pseudomonadaceae",
      "rank": "Family",
      "percent": 1.74,
      "value": 1.74
    },
    {
      "name": "Pseudomonas",
      "rank": "Genus",
      "percent": 1.427,
      "value": 1.427
    },
    {
      "name": "Lysobacterales",
      "rank": "Order",
      "percent": 1.604,
      "value": 1.604
    },
    {
      "name": "Lysobacteraceae",
      "rank": "Family",
      "percent": 1.213,
      "value": 1.213
    },
    {
      "name": "Betaproteobacteria",
      "rank": "Class",
      "percent": 7.417,
      "value": 7.417
    },
    {
      "name": "Burkholderiales",
      "rank": "Order",
      "percent": 6.286,
      "value": 6.286
    },
    {
      "name": "Comamonadaceae",
      "rank": "Family",
      "percent": 1.713,
      "value": 1.713
    },
    {
      "name": "Burkholderiaceae",
      "rank": "Family",
      "percent": 2.105,
      "value": 2.105
    },
    {
      "name": "Alphaproteobacteria",
      "rank": "Class",
      "percent": 20.127,
      "value": 20.127
    },
    {
      "name": "Rhodospirillales",
      "rank": "Order",
      "percent": 0.981,
      "value": 0.981
    },
    {
      "name": "Rhodobacterales",
      "rank": "Order",
      "percent": 1.271,
      "value": 1.271
    },
    {
      "name": "Sphingomonadales",
      "rank": "Order",
      "percent": 2.959,
      "value": 2.959
    },
    {
      "name": "Sphingomonadaceae",
      "rank": "Family",
      "percent": 1.667,
      "value": 1.667
    },
    {
      "name": "Sphingomonas",
      "rank": "Genus",
      "percent": 1.345,
      "value": 1.345
    },
    {
      "name": "Hyphomicrobiales",
      "rank": "Order",
      "percent": 12.201,
      "value": 12.201
    },
    {
      "name": "Phyllobacteriaceae",
      "rank": "Family",
      "percent": 1.152,
      "value": 1.152
    },
    {
      "name": "Mesorhizobium",
      "rank": "Genus",
      "percent": 0.91,
      "value": 0.91
    },
    {
      "name": "Rhizobiaceae",
      "rank": "Family",
      "percent": 1.337,
      "value": 1.337
    },
    {
      "name": "Methylobacteriaceae",
      "rank": "Family",
      "percent": 1.59,
      "value": 1.59
    },
    {
      "name": "Nitrobacteraceae",
      "rank": "Family",
      "percent": 4.444,
      "value": 4.444
    },
    {
      "name": "Bradyrhizobium",
      "rank": "Genus",
      "percent": 3.601,
      "value": 3.601
    },
    {
      "name": "Viridiplantae",
      "rank": "Kingdom",
      "percent": 2.804,
      "value": 2.804
    },
    {
      "name": "Streptophyta",
      "rank": "Phylum",
      "percent": 2.742,
      "value": 2.742
    },
    {
      "name": "Magnoliopsida",
      "rank": "Class",
      "percent": 2.631,
      "value": 2.631
    },
    {
      "name": "Poales",
      "rank": "Order",
      "percent": 1.046,
      "value": 1.046
    },
    {
      "name": "Poaceae",
      "rank": "Family",
      "percent": 1.022,
      "value": 1.022
    },
    {
      "name": "Methanobacteriati",
      "rank": "Kingdom",
      "percent": 0.977,
      "value": 0.977
    },
    {
      "name": "Methanobacteriota",
      "rank": "Phylum",
      "percent": 0.975,
      "value": 0.975
    },
    {
      "name": "Halobacteria",
      "rank": "Class",
      "percent": 0.92,
      "value": 0.92
    },
    {
      "name": "Halobacteriales",
      "rank": "Order",
      "percent": 0.918,
      "value": 0.918
    }
  ],
  "links": [
    {
      "source": "Bacillati",
      "target": "Bacillota",
      "rel": 100562,
      "value": 1.565
    },
    {
      "source": "Bacillota",
      "target": "Bacilli",
      "rel": 74745,
      "value": 1.163
    },
    {
      "source": "Bacilli",
      "target": "Bacillales",
      "rel": 69673,
      "value": 1.084
    },
    {
      "source": "Bacillati",
      "target": "Actinomycetota",
      "rel": 3068556,
      "value": 47.76
    },
    {
      "source": "Actinomycetota",
      "target": "Thermoleophilia",
      "rel": 162188,
      "value": 2.524
    },
    {
      "source": "Thermoleophilia",
      "target": "Solirubrobacterales",
      "rel": 148543,
      "value": 2.312
    },
    {
      "source": "Actinomycetota",
      "target": "Actinomycetes",
      "rel": 2800933,
      "value": 43.595
    },
    {
      "source": "Actinomycetes",
      "target": "Geodermatophilales",
      "rel": 64293,
      "value": 1.001
    },
    {
      "source": "Geodermatophilales",
      "target": "Geodermatophilaceae",
      "rel": 64385,
      "value": 1.002
    },
    {
      "source": "Actinomycetes",
      "target": "Streptosporangiales",
      "rel": 124715,
      "value": 1.941
    },
    {
      "source": "Streptosporangiales",
      "target": "Streptosporangiaceae",
      "rel": 69210,
      "value": 1.077
    },
    {
      "source": "Actinomycetes",
      "target": "Pseudonocardiales",
      "rel": 241381,
      "value": 3.757
    },
    {
      "source": "Pseudonocardiales",
      "target": "Pseudonocardiaceae",
      "rel": 241256,
      "value": 3.755
    },
    {
      "source": "Pseudonocardiaceae",
      "target": "Pseudonocardia",
      "rel": 71783,
      "value": 1.117
    },
    {
      "source": "Pseudonocardiaceae",
      "target": "Amycolatopsis",
      "rel": 72693,
      "value": 1.131
    },
    {
      "source": "Actinomycetes",
      "target": "Micromonosporales",
      "rel": 286342,
      "value": 4.457
    },
    {
      "source": "Micromonosporales",
      "target": "Micromonosporaceae",
      "rel": 286328,
      "value": 4.457
    },
    {
      "source": "Micromonosporaceae",
      "target": "Actinoplanes",
      "rel": 64281,
      "value": 1.0
    },
    {
      "source": "Micromonosporaceae",
      "target": "Micromonospora",
      "rel": 120523,
      "value": 1.876
    },
    {
      "source": "Actinomycetes",
      "target": "Mycobacteriales",
      "rel": 304494,
      "value": 4.739
    },
    {
      "source": "Mycobacteriales",
      "target": "Nocardiaceae",
      "rel": 85595,
      "value": 1.332
    },
    {
      "source": "Mycobacteriales",
      "target": "Mycobacteriaceae",
      "rel": 159215,
      "value": 2.478
    },
    {
      "source": "Mycobacteriaceae",
      "target": "Mycobacterium",
      "rel": 62626,
      "value": 0.975
    },
    {
      "source": "Mycobacteriaceae",
      "target": "Mycolicibacterium",
      "rel": 76591,
      "value": 1.192
    },
    {
      "source": "Actinomycetes",
      "target": "Propionibacteriales",
      "rel": 240356,
      "value": 3.741
    },
    {
      "source": "Propionibacteriales",
      "target": "Nocardioidaceae",
      "rel": 177285,
      "value": 2.759
    },
    {
      "source": "Nocardioidaceae",
      "target": "Nocardioides",
      "rel": 151758,
      "value": 2.362
    },
    {
      "source": "Actinomycetes",
      "target": "Micrococcales",
      "rel": 417593,
      "value": 6.5
    },
    {
      "source": "Micrococcales",
      "target": "Micrococcaceae",
      "rel": 77704,
      "value": 1.209
    },
    {
      "source": "Micrococcales",
      "target": "Microbacteriaceae",
      "rel": 189242,
      "value": 2.945
    },
    {
      "source": "Microbacteriaceae",
      "target": "Microbacterium",
      "rel": 70194,
      "value": 1.093
    },
    {
      "source": "Actinomycetes",
      "target": "Kitasatosporales",
      "rel": 778849,
      "value": 12.122
    },
    {
      "source": "Kitasatosporales",
      "target": "Streptomycetaceae",
      "rel": 777160,
      "value": 12.096
    },
    {
      "source": "Streptomycetaceae",
      "target": "Streptomyces",
      "rel": 704918,
      "value": 10.972
    },
    {
      "source": "Pseudomonadati",
      "target": "Bacteroidota",
      "rel": 70409,
      "value": 1.096
    },
    {
      "source": "Pseudomonadati",
      "target": "Planctomycetota",
      "rel": 159624,
      "value": 2.484
    },
    {
      "source": "Planctomycetota",
      "target": "Planctomycetia",
      "rel": 150241,
      "value": 2.338
    },
    {
      "source": "Pseudomonadati",
      "target": "Myxococcota",
      "rel": 172068,
      "value": 2.678
    },
    {
      "source": "Myxococcota",
      "target": "Myxococcia",
      "rel": 76167,
      "value": 1.185
    },
    {
      "source": "Myxococcia",
      "target": "Myxococcales",
      "rel": 76275,
      "value": 1.187
    },
    {
      "source": "Myxococcota",
      "target": "Polyangiales",
      "rel": 81215,
      "value": 1.264
    },
    {
      "source": "Polyangiales",
      "target": "Polyangiaceae",
      "rel": 68911,
      "value": 1.073
    },
    {
      "source": "Polyangiaceae",
      "target": "Sorangium",
      "rel": 60384,
      "value": 0.94
    },
    {
      "source": "Pseudomonadati",
      "target": "Pseudomonadota",
      "rel": 2244643,
      "value": 34.937
    },
    {
      "source": "Pseudomonadota",
      "target": "Gammaproteobacteria",
      "rel": 368637,
      "value": 5.738
    },
    {
      "source": "Gammaproteobacteria",
      "target": "Pseudomonadales",
      "rel": 114992,
      "value": 1.79
    },
    {
      "source": "Pseudomonadales",
      "target": "Pseudomonadaceae",
      "rel": 111780,
      "value": 1.74
    },
    {
      "source": "Pseudomonadaceae",
      "target": "Pseudomonas",
      "rel": 91689,
      "value": 1.427
    },
    {
      "source": "Gammaproteobacteria",
      "target": "Lysobacterales",
      "rel": 103084,
      "value": 1.604
    },
    {
      "source": "Lysobacterales",
      "target": "Lysobacteraceae",
      "rel": 77918,
      "value": 1.213
    },
    {
      "source": "Pseudomonadota",
      "target": "Betaproteobacteria",
      "rel": 476523,
      "value": 7.417
    },
    {
      "source": "Betaproteobacteria",
      "target": "Burkholderiales",
      "rel": 403845,
      "value": 6.286
    },
    {
      "source": "Burkholderiales",
      "target": "Comamonadaceae",
      "rel": 110030,
      "value": 1.713
    },
    {
      "source": "Burkholderiales",
      "target": "Burkholderiaceae",
      "rel": 135217,
      "value": 2.105
    },
    {
      "source": "Pseudomonadota",
      "target": "Alphaproteobacteria",
      "rel": 1293158,
      "value": 20.127
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Rhodospirillales",
      "rel": 63018,
      "value": 0.981
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Rhodobacterales",
      "rel": 81652,
      "value": 1.271
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Sphingomonadales",
      "rel": 190097,
      "value": 2.959
    },
    {
      "source": "Sphingomonadales",
      "target": "Sphingomonadaceae",
      "rel": 107087,
      "value": 1.667
    },
    {
      "source": "Sphingomonadaceae",
      "target": "Sphingomonas",
      "rel": 86439,
      "value": 1.345
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Hyphomicrobiales",
      "rel": 783899,
      "value": 12.201
    },
    {
      "source": "Hyphomicrobiales",
      "target": "Phyllobacteriaceae",
      "rel": 74044,
      "value": 1.152
    },
    {
      "source": "Phyllobacteriaceae",
      "target": "Mesorhizobium",
      "rel": 58440,
      "value": 0.91
    },
    {
      "source": "Hyphomicrobiales",
      "target": "Rhizobiaceae",
      "rel": 85897,
      "value": 1.337
    },
    {
      "source": "Hyphomicrobiales",
      "target": "Methylobacteriaceae",
      "rel": 102182,
      "value": 1.59
    },
    {
      "source": "Hyphomicrobiales",
      "target": "Nitrobacteraceae",
      "rel": 285522,
      "value": 4.444
    },
    {
      "source": "Nitrobacteraceae",
      "target": "Bradyrhizobium",
      "rel": 231369,
      "value": 3.601
    },
    {
      "source": "Viridiplantae",
      "target": "Streptophyta",
      "rel": 176142,
      "value": 2.742
    },
    {
      "source": "Streptophyta",
      "target": "Magnoliopsida",
      "rel": 169071,
      "value": 2.631
    },
    {
      "source": "Magnoliopsida",
      "target": "Poales",
      "rel": 67195,
      "value": 1.046
    },
    {
      "source": "Poales",
      "target": "Poaceae",
      "rel": 65643,
      "value": 1.022
    },
    {
      "source": "Methanobacteriati",
      "target": "Methanobacteriota",
      "rel": 62614,
      "value": 0.975
    },
    {
      "source": "Methanobacteriota",
      "target": "Halobacteria",
      "rel": 59078,
      "value": 0.92
    },
    {
      "source": "Halobacteria",
      "target": "Halobacteriales",
      "rel": 58987,
      "value": 0.918
    }
  ]
}
</script>

<script id="data_0_1" type="application/json">
 {
  "nodes": [
    {
      "name": "Bacillati",
      "rank": "Kingdom",
      "percent": 50.016,
      "value": 50.016
    },
    {
      "name": "Bacillota",
      "rank": "Phylum",
      "percent": 1.565,
      "value": 1.565
    },
    {
      "name": "Bacilli",
      "rank": "Class",
      "percent": 1.163,
      "value": 1.163
    },
    {
      "name": "Bacillales",
      "rank": "Order",
      "percent": 1.084,
      "value": 1.084
    },
    {
      "name": "Actinomycetota",
      "rank": "Phylum",
      "percent": 47.76,
      "value": 47.76
    },
    {
      "name": "Acidimicrobiia",
      "rank": "Class",
      "percent": 0.658,
      "value": 0.658
    },
    {
      "name": "Acidimicrobiales",
      "rank": "Order",
      "percent": 0.651,
      "value": 0.651
    },
    {
      "name": "Thermoleophilia",
      "rank": "Class",
      "percent": 2.524,
      "value": 2.524
    },
    {
      "name": "Solirubrobacterales",
      "rank": "Order",
      "percent": 2.312,
      "value": 2.312
    },
    {
      "name": "Conexibacteraceae",
      "rank": "Family",
      "percent": 0.692,
      "value": 0.692
    },
    {
      "name": "Conexibacter",
      "rank": "Genus",
      "percent": 0.692,
      "value": 0.692
    },
    {
      "name": "Baekduiaceae",
      "rank": "Family",
      "percent": 0.82,
      "value": 0.82
    },
    {
      "name": "Baekduia",
      "rank": "Genus",
      "percent": 0.641,
      "value": 0.641
    },
    {
      "name": "Actinomycetes",
      "rank": "Class",
      "percent": 43.595,
      "value": 43.595
    },
    {
      "name": "Geodermatophilales",
      "rank": "Order",
      "percent": 1.001,
      "value": 1.001
    },
    {
      "name": "Geodermatophilaceae",
      "rank": "Family",
      "percent": 1.002,
      "value": 1.002
    },
    {
      "name": "Streptosporangiales",
      "rank": "Order",
      "percent": 1.941,
      "value": 1.941
    },
    {
      "name": "Thermomonosporaceae",
      "rank": "Family",
      "percent": 0.63,
      "value": 0.63
    },
    {
      "name": "Streptosporangiaceae",
      "rank": "Family",
      "percent": 1.077,
      "value": 1.077
    },
    {
      "name": "Pseudonocardiales",
      "rank": "Order",
      "percent": 3.757,
      "value": 3.757
    },
    {
      "name": "Pseudonocardiaceae",
      "rank": "Family",
      "percent": 3.755,
      "value": 3.755
    },
    {
      "name": "Pseudonocardia",
      "rank": "Genus",
      "percent": 1.117,
      "value": 1.117
    },
    {
      "name": "Amycolatopsis",
      "rank": "Genus",
      "percent": 1.131,
      "value": 1.131
    },
    {
      "name": "Micromonosporales",
      "rank": "Order",
      "percent": 4.457,
      "value": 4.457
    },
    {
      "name": "Micromonosporaceae",
      "rank": "Family",
      "percent": 4.457,
      "value": 4.457
    },
    {
      "name": "Dactylosporangium",
      "rank": "Genus",
      "percent": 0.692,
      "value": 0.692
    },
    {
      "name": "Actinoplanes",
      "rank": "Genus",
      "percent": 1.0,
      "value": 1.0
    },
    {
      "name": "Micromonospora",
      "rank": "Genus",
      "percent": 1.876,
      "value": 1.876
    },
    {
      "name": "Mycobacteriales",
      "rank": "Order",
      "percent": 4.739,
      "value": 4.739
    },
    {
      "name": "Nocardiaceae",
      "rank": "Family",
      "percent": 1.332,
      "value": 1.332
    },
    {
      "name": "Nocardia",
      "rank": "Genus",
      "percent": 0.775,
      "value": 0.775
    },
    {
      "name": "Mycobacteriaceae",
      "rank": "Family",
      "percent": 2.478,
      "value": 2.478
    },
    {
      "name": "Mycobacterium",
      "rank": "Genus",
      "percent": 0.975,
      "value": 0.975
    },
    {
      "name": "Mycolicibacterium",
      "rank": "Genus",
      "percent": 1.192,
      "value": 1.192
    },
    {
      "name": "Propionibacteriales",
      "rank": "Order",
      "percent": 3.741,
      "value": 3.741
    },
    {
      "name": "Kribbellaceae",
      "rank": "Family",
      "percent": 0.521,
      "value": 0.521
    },
    {
      "name": "Kribbella",
      "rank": "Genus",
      "percent": 0.521,
      "value": 0.521
    },
    {
      "name": "Nocardioidaceae",
      "rank": "Family",
      "percent": 2.759,
      "value": 2.759
    },
    {
      "name": "Nocardioides",
      "rank": "Genus",
      "percent": 2.362,
      "value": 2.362
    },
    {
      "name": "Micrococcales",
      "rank": "Order",
      "percent": 6.5,
      "value": 6.5
    },
    {
      "name": "Cellulomonadaceae",
      "rank": "Family",
      "percent": 0.528,
      "value": 0.528
    },
    {
      "name": "Micrococcaceae",
      "rank": "Family",
      "percent": 1.209,
      "value": 1.209
    },
    {
      "name": "Arthrobacter",
      "rank": "Genus",
      "percent": 0.601,
      "value": 0.601
    },
    {
      "name": "Microbacteriaceae",
      "rank": "Family",
      "percent": 2.945,
      "value": 2.945
    },
    {
      "name": "Microbacterium",
      "rank": "Genus",
      "percent": 1.093,
      "value": 1.093
    },
    {
      "name": "Kitasatosporales",
      "rank": "Order",
      "percent": 12.122,
      "value": 12.122
    },
    {
      "name": "Streptomycetaceae",
      "rank": "Family",
      "percent": 12.096,
      "value": 12.096
    },
    {
      "name": "Kitasatospora",
      "rank": "Genus",
      "percent": 0.558,
      "value": 0.558
    },
    {
      "name": "Streptomyces",
      "rank": "Genus",
      "percent": 10.972,
      "value": 10.972
    },
    {
      "name": "Pseudomonadati",
      "rank": "Kingdom",
      "percent": 44.837,
      "value": 44.837
    },
    {
      "name": "Acidobacteriota",
      "rank": "Phylum",
      "percent": 0.789,
      "value": 0.789
    },
    {
      "name": "Gemmatimonadota",
      "rank": "Phylum",
      "percent": 0.534,
      "value": 0.534
    },
    {
      "name": "Gemmatimonadia",
      "rank": "Class",
      "percent": 0.504,
      "value": 0.504
    },
    {
      "name": "Bacteroidota",
      "rank": "Phylum",
      "percent": 1.096,
      "value": 1.096
    },
    {
      "name": "Planctomycetota",
      "rank": "Phylum",
      "percent": 2.484,
      "value": 2.484
    },
    {
      "name": "Planctomycetia",
      "rank": "Class",
      "percent": 2.338,
      "value": 2.338
    },
    {
      "name": "Isosphaerales",
      "rank": "Order",
      "percent": 0.724,
      "value": 0.724
    },
    {
      "name": "Isosphaeraceae",
      "rank": "Family",
      "percent": 0.722,
      "value": 0.722
    },
    {
      "name": "Gemmatales",
      "rank": "Order",
      "percent": 0.703,
      "value": 0.703
    },
    {
      "name": "Gemmataceae",
      "rank": "Family",
      "percent": 0.704,
      "value": 0.704
    },
    {
      "name": "Myxococcota",
      "rank": "Phylum",
      "percent": 2.678,
      "value": 2.678
    },
    {
      "name": "Myxococcia",
      "rank": "Class",
      "percent": 1.185,
      "value": 1.185
    },
    {
      "name": "Myxococcales",
      "rank": "Order",
      "percent": 1.187,
      "value": 1.187
    },
    {
      "name": "Polyangiales",
      "rank": "Order",
      "percent": 1.264,
      "value": 1.264
    },
    {
      "name": "Polyangiaceae",
      "rank": "Family",
      "percent": 1.073,
      "value": 1.073
    },
    {
      "name": "Sorangium",
      "rank": "Genus",
      "percent": 0.94,
      "value": 0.94
    },
    {
      "name": "Pseudomonadota",
      "rank": "Phylum",
      "percent": 34.937,
      "value": 34.937
    },
    {
      "name": "Gammaproteobacteria",
      "rank": "Class",
      "percent": 5.738,
      "value": 5.738
    },
    {
      "name": "Enterobacterales",
      "rank": "Order",
      "percent": 0.597,
      "value": 0.597
    },
    {
      "name": "Pseudomonadales",
      "rank": "Order",
      "percent": 1.79,
      "value": 1.79
    },
    {
      "name": "Pseudomonadaceae",
      "rank": "Family",
      "percent": 1.74,
      "value": 1.74
    },
    {
      "name": "Pseudomonas",
      "rank": "Genus",
      "percent": 1.427,
      "value": 1.427
    },
    {
      "name": "Lysobacterales",
      "rank": "Order",
      "percent": 1.604,
      "value": 1.604
    },
    {
      "name": "Lysobacteraceae",
      "rank": "Family",
      "percent": 1.213,
      "value": 1.213
    },
    {
      "name": "Betaproteobacteria",
      "rank": "Class",
      "percent": 7.417,
      "value": 7.417
    },
    {
      "name": "Burkholderiales",
      "rank": "Order",
      "percent": 6.286,
      "value": 6.286
    },
    {
      "name": "Alcaligenaceae",
      "rank": "Family",
      "percent": 0.524,
      "value": 0.524
    },
    {
      "name": "Sphaerotilaceae",
      "rank": "Family",
      "percent": 0.643,
      "value": 0.643
    },
    {
      "name": "Oxalobacteraceae",
      "rank": "Family",
      "percent": 0.795,
      "value": 0.795
    },
    {
      "name": "Comamonadaceae",
      "rank": "Family",
      "percent": 1.713,
      "value": 1.713
    },
    {
      "name": "Variovorax",
      "rank": "Genus",
      "percent": 0.632,
      "value": 0.632
    },
    {
      "name": "Burkholderiaceae",
      "rank": "Family",
      "percent": 2.105,
      "value": 2.105
    },
    {
      "name": "Burkholderia",
      "rank": "Genus",
      "percent": 0.712,
      "value": 0.712
    },
    {
      "name": "Alphaproteobacteria",
      "rank": "Class",
      "percent": 20.127,
      "value": 20.127
    },
    {
      "name": "Acetobacterales",
      "rank": "Order",
      "percent": 0.871,
      "value": 0.871
    },
    {
      "name": "Roseomonadaceae",
      "rank": "Family",
      "percent": 0.536,
      "value": 0.536
    },
    {
      "name": "Caulobacterales",
      "rank": "Order",
      "percent": 0.686,
      "value": 0.686
    },
    {
      "name": "Caulobacteraceae",
      "rank": "Family",
      "percent": 0.685,
      "value": 0.685
    },
    {
      "name": "Rhodospirillales",
      "rank": "Order",
      "percent": 0.981,
      "value": 0.981
    },
    {
      "name": "Azospirillaceae",
      "rank": "Family",
      "percent": 0.514,
      "value": 0.514
    },
    {
      "name": "Rhodobacterales",
      "rank": "Order",
      "percent": 1.271,
      "value": 1.271
    },
    {
      "name": "Roseobacteraceae",
      "rank": "Family",
      "percent": 0.512,
      "value": 0.512
    },
    {
      "name": "Paracoccaceae",
      "rank": "Family",
      "percent": 0.661,
      "value": 0.661
    },
    {
      "name": "Sphingomonadales",
      "rank": "Order",
      "percent": 2.959,
      "value": 2.959
    },
    {
      "name": "Sphingomonadaceae",
      "rank": "Family",
      "percent": 1.667,
      "value": 1.667
    },
    {
      "name": "Sphingomonas",
      "rank": "Genus",
      "percent": 1.345,
      "value": 1.345
    },
    {
      "name": "Hyphomicrobiales",
      "rank": "Order",
      "percent": 12.201,
      "value": 12.201
    },
    {
      "name": "Phyllobacteriaceae",
      "rank": "Family",
      "percent": 1.152,
      "value": 1.152
    },
    {
      "name": "Mesorhizobium",
      "rank": "Genus",
      "percent": 0.91,
      "value": 0.91
    },
    {
      "name": "Rhizobiaceae",
      "rank": "Family",
      "percent": 1.337,
      "value": 1.337
    },
    {
      "name": "Rhizobium",
      "rank": "Genus",
      "percent": 0.522,
      "value": 0.522
    },
    {
      "name": "Methylobacteriaceae",
      "rank": "Family",
      "percent": 1.59,
      "value": 1.59
    },
    {
      "name": "Methylobacterium",
      "rank": "Genus",
      "percent": 0.664,
      "value": 0.664
    },
    {
      "name": "Microvirga",
      "rank": "Genus",
      "percent": 0.79,
      "value": 0.79
    },
    {
      "name": "Nitrobacteraceae",
      "rank": "Family",
      "percent": 4.444,
      "value": 4.444
    },
    {
      "name": "Bradyrhizobium",
      "rank": "Genus",
      "percent": 3.601,
      "value": 3.601
    },
    {
      "name": "Viridiplantae",
      "rank": "Kingdom",
      "percent": 2.804,
      "value": 2.804
    },
    {
      "name": "Streptophyta",
      "rank": "Phylum",
      "percent": 2.742,
      "value": 2.742
    },
    {
      "name": "Magnoliopsida",
      "rank": "Class",
      "percent": 2.631,
      "value": 2.631
    },
    {
      "name": "Poales",
      "rank": "Order",
      "percent": 1.046,
      "value": 1.046
    },
    {
      "name": "Poaceae",
      "rank": "Family",
      "percent": 1.022,
      "value": 1.022
    },
    {
      "name": "Methanobacteriati",
      "rank": "Kingdom",
      "percent": 0.977,
      "value": 0.977
    },
    {
      "name": "Methanobacteriota",
      "rank": "Phylum",
      "percent": 0.975,
      "value": 0.975
    },
    {
      "name": "Halobacteria",
      "rank": "Class",
      "percent": 0.92,
      "value": 0.92
    },
    {
      "name": "Halobacteriales",
      "rank": "Order",
      "percent": 0.918,
      "value": 0.918
    }
  ],
  "links": [
    {
      "source": "Bacillati",
      "target": "Bacillota",
      "rel": 100562,
      "value": 1.565
    },
    {
      "source": "Bacillota",
      "target": "Bacilli",
      "rel": 74745,
      "value": 1.163
    },
    {
      "source": "Bacilli",
      "target": "Bacillales",
      "rel": 69673,
      "value": 1.084
    },
    {
      "source": "Bacillati",
      "target": "Actinomycetota",
      "rel": 3068556,
      "value": 47.76
    },
    {
      "source": "Actinomycetota",
      "target": "Acidimicrobiia",
      "rel": 42282,
      "value": 0.658
    },
    {
      "source": "Acidimicrobiia",
      "target": "Acidimicrobiales",
      "rel": 41843,
      "value": 0.651
    },
    {
      "source": "Actinomycetota",
      "target": "Thermoleophilia",
      "rel": 162188,
      "value": 2.524
    },
    {
      "source": "Thermoleophilia",
      "target": "Solirubrobacterales",
      "rel": 148543,
      "value": 2.312
    },
    {
      "source": "Solirubrobacterales",
      "target": "Conexibacteraceae",
      "rel": 44474,
      "value": 0.692
    },
    {
      "source": "Conexibacteraceae",
      "target": "Conexibacter",
      "rel": 44479,
      "value": 0.692
    },
    {
      "source": "Solirubrobacterales",
      "target": "Baekduiaceae",
      "rel": 52688,
      "value": 0.82
    },
    {
      "source": "Baekduiaceae",
      "target": "Baekduia",
      "rel": 41189,
      "value": 0.641
    },
    {
      "source": "Actinomycetota",
      "target": "Actinomycetes",
      "rel": 2800933,
      "value": 43.595
    },
    {
      "source": "Actinomycetes",
      "target": "Geodermatophilales",
      "rel": 64293,
      "value": 1.001
    },
    {
      "source": "Geodermatophilales",
      "target": "Geodermatophilaceae",
      "rel": 64385,
      "value": 1.002
    },
    {
      "source": "Actinomycetes",
      "target": "Streptosporangiales",
      "rel": 124715,
      "value": 1.941
    },
    {
      "source": "Streptosporangiales",
      "target": "Thermomonosporaceae",
      "rel": 40451,
      "value": 0.63
    },
    {
      "source": "Streptosporangiales",
      "target": "Streptosporangiaceae",
      "rel": 69210,
      "value": 1.077
    },
    {
      "source": "Actinomycetes",
      "target": "Pseudonocardiales",
      "rel": 241381,
      "value": 3.757
    },
    {
      "source": "Pseudonocardiales",
      "target": "Pseudonocardiaceae",
      "rel": 241256,
      "value": 3.755
    },
    {
      "source": "Pseudonocardiaceae",
      "target": "Pseudonocardia",
      "rel": 71783,
      "value": 1.117
    },
    {
      "source": "Pseudonocardiaceae",
      "target": "Amycolatopsis",
      "rel": 72693,
      "value": 1.131
    },
    {
      "source": "Actinomycetes",
      "target": "Micromonosporales",
      "rel": 286342,
      "value": 4.457
    },
    {
      "source": "Micromonosporales",
      "target": "Micromonosporaceae",
      "rel": 286328,
      "value": 4.457
    },
    {
      "source": "Micromonosporaceae",
      "target": "Dactylosporangium",
      "rel": 44448,
      "value": 0.692
    },
    {
      "source": "Micromonosporaceae",
      "target": "Actinoplanes",
      "rel": 64281,
      "value": 1.0
    },
    {
      "source": "Micromonosporaceae",
      "target": "Micromonospora",
      "rel": 120523,
      "value": 1.876
    },
    {
      "source": "Actinomycetes",
      "target": "Mycobacteriales",
      "rel": 304494,
      "value": 4.739
    },
    {
      "source": "Mycobacteriales",
      "target": "Nocardiaceae",
      "rel": 85595,
      "value": 1.332
    },
    {
      "source": "Nocardiaceae",
      "target": "Nocardia",
      "rel": 49765,
      "value": 0.775
    },
    {
      "source": "Mycobacteriales",
      "target": "Mycobacteriaceae",
      "rel": 159215,
      "value": 2.478
    },
    {
      "source": "Mycobacteriaceae",
      "target": "Mycobacterium",
      "rel": 62626,
      "value": 0.975
    },
    {
      "source": "Mycobacteriaceae",
      "target": "Mycolicibacterium",
      "rel": 76591,
      "value": 1.192
    },
    {
      "source": "Actinomycetes",
      "target": "Propionibacteriales",
      "rel": 240356,
      "value": 3.741
    },
    {
      "source": "Propionibacteriales",
      "target": "Kribbellaceae",
      "rel": 33486,
      "value": 0.521
    },
    {
      "source": "Kribbellaceae",
      "target": "Kribbella",
      "rel": 33505,
      "value": 0.521
    },
    {
      "source": "Propionibacteriales",
      "target": "Nocardioidaceae",
      "rel": 177285,
      "value": 2.759
    },
    {
      "source": "Nocardioidaceae",
      "target": "Nocardioides",
      "rel": 151758,
      "value": 2.362
    },
    {
      "source": "Actinomycetes",
      "target": "Micrococcales",
      "rel": 417593,
      "value": 6.5
    },
    {
      "source": "Micrococcales",
      "target": "Cellulomonadaceae",
      "rel": 33953,
      "value": 0.528
    },
    {
      "source": "Micrococcales",
      "target": "Micrococcaceae",
      "rel": 77704,
      "value": 1.209
    },
    {
      "source": "Micrococcaceae",
      "target": "Arthrobacter",
      "rel": 38598,
      "value": 0.601
    },
    {
      "source": "Micrococcales",
      "target": "Microbacteriaceae",
      "rel": 189242,
      "value": 2.945
    },
    {
      "source": "Microbacteriaceae",
      "target": "Microbacterium",
      "rel": 70194,
      "value": 1.093
    },
    {
      "source": "Actinomycetes",
      "target": "Kitasatosporales",
      "rel": 778849,
      "value": 12.122
    },
    {
      "source": "Kitasatosporales",
      "target": "Streptomycetaceae",
      "rel": 777160,
      "value": 12.096
    },
    {
      "source": "Streptomycetaceae",
      "target": "Kitasatospora",
      "rel": 35875,
      "value": 0.558
    },
    {
      "source": "Streptomycetaceae",
      "target": "Streptomyces",
      "rel": 704918,
      "value": 10.972
    },
    {
      "source": "Pseudomonadati",
      "target": "Acidobacteriota",
      "rel": 50668,
      "value": 0.789
    },
    {
      "source": "Pseudomonadati",
      "target": "Gemmatimonadota",
      "rel": 34296,
      "value": 0.534
    },
    {
      "source": "Gemmatimonadota",
      "target": "Gemmatimonadia",
      "rel": 32379,
      "value": 0.504
    },
    {
      "source": "Pseudomonadati",
      "target": "Bacteroidota",
      "rel": 70409,
      "value": 1.096
    },
    {
      "source": "Pseudomonadati",
      "target": "Planctomycetota",
      "rel": 159624,
      "value": 2.484
    },
    {
      "source": "Planctomycetota",
      "target": "Planctomycetia",
      "rel": 150241,
      "value": 2.338
    },
    {
      "source": "Planctomycetia",
      "target": "Isosphaerales",
      "rel": 46489,
      "value": 0.724
    },
    {
      "source": "Isosphaerales",
      "target": "Isosphaeraceae",
      "rel": 46413,
      "value": 0.722
    },
    {
      "source": "Planctomycetia",
      "target": "Gemmatales",
      "rel": 45156,
      "value": 0.703
    },
    {
      "source": "Gemmatales",
      "target": "Gemmataceae",
      "rel": 45243,
      "value": 0.704
    },
    {
      "source": "Pseudomonadati",
      "target": "Myxococcota",
      "rel": 172068,
      "value": 2.678
    },
    {
      "source": "Myxococcota",
      "target": "Myxococcia",
      "rel": 76167,
      "value": 1.185
    },
    {
      "source": "Myxococcia",
      "target": "Myxococcales",
      "rel": 76275,
      "value": 1.187
    },
    {
      "source": "Myxococcota",
      "target": "Polyangiales",
      "rel": 81215,
      "value": 1.264
    },
    {
      "source": "Polyangiales",
      "target": "Polyangiaceae",
      "rel": 68911,
      "value": 1.073
    },
    {
      "source": "Polyangiaceae",
      "target": "Sorangium",
      "rel": 60384,
      "value": 0.94
    },
    {
      "source": "Pseudomonadati",
      "target": "Pseudomonadota",
      "rel": 2244643,
      "value": 34.937
    },
    {
      "source": "Pseudomonadota",
      "target": "Gammaproteobacteria",
      "rel": 368637,
      "value": 5.738
    },
    {
      "source": "Gammaproteobacteria",
      "target": "Enterobacterales",
      "rel": 38333,
      "value": 0.597
    },
    {
      "source": "Gammaproteobacteria",
      "target": "Pseudomonadales",
      "rel": 114992,
      "value": 1.79
    },
    {
      "source": "Pseudomonadales",
      "target": "Pseudomonadaceae",
      "rel": 111780,
      "value": 1.74
    },
    {
      "source": "Pseudomonadaceae",
      "target": "Pseudomonas",
      "rel": 91689,
      "value": 1.427
    },
    {
      "source": "Gammaproteobacteria",
      "target": "Lysobacterales",
      "rel": 103084,
      "value": 1.604
    },
    {
      "source": "Lysobacterales",
      "target": "Lysobacteraceae",
      "rel": 77918,
      "value": 1.213
    },
    {
      "source": "Pseudomonadota",
      "target": "Betaproteobacteria",
      "rel": 476523,
      "value": 7.417
    },
    {
      "source": "Betaproteobacteria",
      "target": "Burkholderiales",
      "rel": 403845,
      "value": 6.286
    },
    {
      "source": "Burkholderiales",
      "target": "Alcaligenaceae",
      "rel": 33684,
      "value": 0.524
    },
    {
      "source": "Burkholderiales",
      "target": "Sphaerotilaceae",
      "rel": 41344,
      "value": 0.643
    },
    {
      "source": "Burkholderiales",
      "target": "Oxalobacteraceae",
      "rel": 51105,
      "value": 0.795
    },
    {
      "source": "Burkholderiales",
      "target": "Comamonadaceae",
      "rel": 110030,
      "value": 1.713
    },
    {
      "source": "Comamonadaceae",
      "target": "Variovorax",
      "rel": 40583,
      "value": 0.632
    },
    {
      "source": "Burkholderiales",
      "target": "Burkholderiaceae",
      "rel": 135217,
      "value": 2.105
    },
    {
      "source": "Burkholderiaceae",
      "target": "Burkholderia",
      "rel": 45753,
      "value": 0.712
    },
    {
      "source": "Pseudomonadota",
      "target": "Alphaproteobacteria",
      "rel": 1293158,
      "value": 20.127
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Acetobacterales",
      "rel": 55940,
      "value": 0.871
    },
    {
      "source": "Acetobacterales",
      "target": "Roseomonadaceae",
      "rel": 34406,
      "value": 0.536
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Caulobacterales",
      "rel": 44092,
      "value": 0.686
    },
    {
      "source": "Caulobacterales",
      "target": "Caulobacteraceae",
      "rel": 44033,
      "value": 0.685
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Rhodospirillales",
      "rel": 63018,
      "value": 0.981
    },
    {
      "source": "Rhodospirillales",
      "target": "Azospirillaceae",
      "rel": 33033,
      "value": 0.514
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Rhodobacterales",
      "rel": 81652,
      "value": 1.271
    },
    {
      "source": "Rhodobacterales",
      "target": "Roseobacteraceae",
      "rel": 32905,
      "value": 0.512
    },
    {
      "source": "Rhodobacterales",
      "target": "Paracoccaceae",
      "rel": 42492,
      "value": 0.661
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Sphingomonadales",
      "rel": 190097,
      "value": 2.959
    },
    {
      "source": "Sphingomonadales",
      "target": "Sphingomonadaceae",
      "rel": 107087,
      "value": 1.667
    },
    {
      "source": "Sphingomonadaceae",
      "target": "Sphingomonas",
      "rel": 86439,
      "value": 1.345
    },
    {
      "source": "Alphaproteobacteria",
      "target": "Hyphomicrobiales",
      "rel": 783899,
      "value": 12.201
    },
    {
      "source": "Hyphomicrobiales",
      "target": "Phyllobacteriaceae",
      "rel": 74044,
      "value": 1.152
    },
    {
      "source": "Phyllobacteriaceae",
      "target": "Mesorhizobium",
      "rel": 58440,
      "value": 0.91
    },
    {
      "source": "Hyphomicrobiales",
      "target": "Rhizobiaceae",
      "rel": 85897,
      "value": 1.337
    },
    {
      "source": "Rhizobiaceae",
      "target": "Rhizobium",
      "rel": 33528,
      "value": 0.522
    },
    {
      "source": "Hyphomicrobiales",
      "target": "Methylobacteriaceae",
      "rel": 102182,
      "value": 1.59
    },
    {
      "source": "Methylobacteriaceae",
      "target": "Methylobacterium",
      "rel": 42635,
      "value": 0.664
    },
    {
      "source": "Methylobacteriaceae",
      "target": "Microvirga",
      "rel": 50761,
      "value": 0.79
    },
    {
      "source": "Hyphomicrobiales",
      "target": "Nitrobacteraceae",
      "rel": 285522,
      "value": 4.444
    },
    {
      "source": "Nitrobacteraceae",
      "target": "Bradyrhizobium",
      "rel": 231369,
      "value": 3.601
    },
    {
      "source": "Viridiplantae",
      "target": "Streptophyta",
      "rel": 176142,
      "value": 2.742
    },
    {
      "source": "Streptophyta",
      "target": "Magnoliopsida",
      "rel": 169071,
      "value": 2.631
    },
    {
      "source": "Magnoliopsida",
      "target": "Poales",
      "rel": 67195,
      "value": 1.046
    },
    {
      "source": "Poales",
      "target": "Poaceae",
      "rel": 65643,
      "value": 1.022
    },
    {
      "source": "Methanobacteriati",
      "target": "Methanobacteriota",
      "rel": 62614,
      "value": 0.975
    },
    {
      "source": "Methanobacteriota",
      "target": "Halobacteria",
      "rel": 59078,
      "value": 0.92
    },
    {
      "source": "Halobacteria",
      "target": "Halobacteriales",
      "rel": 58987,
      "value": 0.918
    }
  ]
}
</script>

<script>
  let chart = echarts.init(document.getElementById('chart'));
  const data_1 = JSON.parse(
    document.getElementById("data_1").textContent
  );
  const data_0_5 = JSON.parse(
    document.getElementById("data_0_5").textContent
  );
  const data_0_1 = JSON.parse(
    document.getElementById("data_0_1").textContent
  );

  const ranks = ["Kingdom", "Phylum", "Class", "Order", "Family", "Genus", "Species"]
  

  const highlightPath = ['Pseudomonadati', 'Pseudomonadota', 'Alphaproteobacteria', 'Hyphomicrobiales', 'Nitrobacteraceae', 'Bradyrhizobium', 'Bradyrhizobium_sp'];
  

  const highlightNodes = new Set(highlightPath);
  const highlightEdges = new Set(
    highlightPath.map((node, i) =>
      i < highlightPath.length - 1
        ? `${highlightPath[i]}${highlightPath[i + 1]}`
        : null
    ).filter(Boolean)
  );  
  let currentDepth = 2
  let currentData = data_1

  
  function filterByDepth(data, maxDepth) {
    const allowedRanks = new Set(ranks.slice(0, maxDepth + 1));

    // keep nodes up to depth
    const nodes = data.nodes.filter(n => allowedRanks.has(n.rank));

    // names of kept nodes
    const names = new Set(nodes.map(n => n.name));

    // keep only edges whose endpoints both exist
    const links = data.links.filter(l =>
      names.has(l.source) && names.has(l.target)
    );

  return { nodes, links };
}

  function makeSankeyOptions(data) {
    console.log(currentDepth)
    filteredData = filterByDepth(data=data, maxDepth=currentDepth)

    
    const HIGHLIGHT_COLOR = "#DD85E7"
    const styledNodes = filteredData.nodes.map(n => {
      if (highlightNodes.has(n.name)) {
        return {
          ...n,
          itemStyle: {
            color: HIGHLIGHT_COLOR,
            opacity: 1
          }
        };
      }
      return n; // keep level-based theme
    });

    const styledLinks = filteredData.links.map(l => {
      const key = `${l.source}${l.target}`;
      if (highlightEdges.has(key)) {
        return {
          ...l,
          lineStyle: {
            color: HIGHLIGHT_COLOR,
            opacity: 0.65
          }
        };
      }
      return {
        ...l,
        lineStyle: {
        }
      };
    });

    return{
        tooltip: {
          trigger: 'item',
          triggerOn: 'mousemove',
          formatter: function (params) {
            return `
              <b>${params.name}</b><br/>
              Relative abundance: ${params.data.percent} %<br/>
              Rank: ${params.data.rank}
            `;
          }
        },
        series: [{
          label: {
            show: true,
            silent: true,   // keeps tooltip hover working
            fontSize: 16,
            lineHeight: 15,
            formatter: function (params) {
              const reads =
                typeof params.value === 'number'
                  ? params.value.toLocaleString()
                  : 'NA';

              return `${params.name}\n${reads}`;
            }
          },
          type: 'sankey',
          nodeGap: 25,
          nodeAlign: 'left',
          emphasis: {
            focus: 'adjacency'
          },
          lineStyle: {
            curveness: 0.30,
            color: 'source'
          },
          data: styledNodes,
          links: styledLinks,
            levels: [
                        {
                        depth: 0,
                        itemStyle: {
                            color: '#aba4fe'
                        },
                        lineStyle: {
                            color: '#aba4fe',
                            opacity: 0.6
                        }
                        },
                        {
                        depth: 1,
                        itemStyle: {
                            color: '#b3cde3'
                        },
                        lineStyle: {
                            color: '#b3cde3',
                            opacity: 0.6
                        }
                        },
                        {
                        depth: 2,
                        itemStyle: {
                            color: '#abf4d3'
                        },
                        lineStyle: {
                            color: '#abf4d3',
                            opacity: 0.6
                        }
                        },
                        {
                        depth: 3,
                        itemStyle: {
                            color: '#abf4a3'
                        },
                        lineStyle: {
                            color: '#abf4a3',
                            opacity: 0.6
                        }
                        }
                    ],
        }]
      };
  }

  chart.setOption(makeSankeyOptions(data_0_5));

  function rerenderChart(data) {
    const dom = document.getElementById("chart");

    if (chart) {
      chart.dispose();
    }

    chart = echarts.init(dom);
    chart.setOption(makeSankeyOptions(data));
  }
  

  function set1reads() {
    currentData = data_1
    rerenderChart(data_1)
  }
  function set05reads() {
    currentData = data_0_5
    rerenderChart(data_0_5)
    console.log("0.5")
  }
  function set01reads() {
    currentData = data_0_1
    rerenderChart(data_0_1)
    console.log("0.1")
  }
  
  function onDepthChange() {
    currentDepth = Number(
      document.getElementById("depthSelect").value
    );
    rerenderChart(currentData);
  }
</script>

</body>
</html>
